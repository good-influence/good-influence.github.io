---
layout: post
title: Lambda
subtitle: Lambda
categories: JAVA
tags: [JAVA, Lambda]
---
## ëŒë‹¤ì‹ ì‚¬ìš©ë²•

ëŒë‹¤ì‹ ì‚¬ìš©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

```jsx
() -> {}
ì¸ì   ë°”ë””
```

- ì¸ìê°€ ì—†ì„ë•Œ
    - () â†’ {ë°”ë””}
- ì¸ìê°€ í•œê°œì¼ë•Œ
    - (a) â†’ {ë°”ë””}
    - a â†’ {ë°”ë””}
- ì¸ìê°€ ì—¬ëŸ¬ê°œì¼ë•Œ
    - (a, b) â†’ {ë°”ë””}

ì¸ìì˜ íƒ€ì…ì€ ì»´íŒŒì¼ëŸ¬ê°€ ì¶”ë¡ í•˜ê¸°ë•Œë¬¸ì— ìƒëµì´ ê°€ëŠ¥í•˜ì§€ë§Œ ëª…ì‹œí•  ìˆ˜ë„ ìˆë‹¤. 

- `(Integer a, String b) â†’ {ë°”ë””}`

ë°”ë””

- í™”ì‚´í‘œ ì˜¤ë¥¸ìª½ì— í•¨ìˆ˜ ë³¸ë¬¸ì„ ì •ì˜í•œë‹¤.
- ì—¬ëŸ¬ ì¤„ì¸ ê²½ìš°ì— {} ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¶ëŠ”ë‹¤.
    - í•œ ì¤„ì¸ ê²½ìš°ì— {} ìƒëµê°€ëŠ¥í•˜ë©°, returnë„ ìƒëµ ê°€ëŠ¥í•˜ë‹¤.
    
    ```java
    () -> System.out.println("í•œ ì¤„ì¼ ê²½ìš° ì¤‘ê´„í˜¸ ìƒëµ");
    () -> 10;             // return ìƒëµ ê°€ëŠ¥
    ```
    

## í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤


>  ğŸ‘‰ ì¶”ìƒ ë©”ì†Œë“œë¥¼ í•˜ë‚˜ë§Œ ê°€ì§€ê³  ìˆëŠ” ì¸í„°í˜ì´ìŠ¤  
>             â†’ **SAM (Single Abstract Method)**  
>  ğŸ‘‰ `@FuncationInterface` ì• ë…¸í…Œì´ì…˜ì„ ê°€ì§€ê³  ìˆëŠ” ì¸í„°í˜ì´ìŠ¤


### í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë€?

í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ëŠ” **ì¶”ìƒ ë©”ì†Œë“œë¥¼ í•˜ë‚˜ë§Œ ê°€ì§€ê³  ìˆëŠ” ì¸í„°í˜ì´ìŠ¤**ë¡œ,

```java
public interface RunSomething {
    void doIt();
}
```

ë‹¤ìŒê³¼ ê°™ì´ ë‘ê°œì´ìƒì˜ ì¶”ìƒ ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©´ **í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ê°€ ì•„ë‹ˆë‹¤**.

```java
public interface RunSomething {
    void doIt();      // abstract ìƒëµë¨.

    void doItAgain();
}
```

ê·¸ëŸ¬ë‚˜, java 8ë¶€í„° ë„ì…ëœ **static ë©”ì†Œë“œ, default ë©”ì†Œë“œê°€ ìˆì–´ë„ ì¶”ìƒë©”ì†Œë“œê°€ í•˜ë‚˜ë¼ë©´ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ê°€ ë§ë‹¤**.

```java
public interface RunSomething {
    void doIt();      

    static void printName() {
        System.out.println("yesol");
    }
    
    default void printAge() {
        System.out.println("50");
    }
}
```

í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•  ë•Œ ìë°”ì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µë˜ëŠ” `@FunctionalInterface` ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ ì‹¤ìˆ˜ë¡œ ì¶”ìƒë©”ì†Œë“œë¥¼ í•œê°œ ì´ìƒ ì •ì˜í–ˆì„ ë•Œ **ì»´íŒŒì¼ ì—ëŸ¬ë¥¼ ë°œìƒì‹œì¼œ** ì•ˆì „í•˜ê²Œ ì½”ë”©ì´ ê°€ëŠ¥í•˜ë‹¤.

```java
@FunctionalInterface                 // ì»´íŒŒì¼ ì—ëŸ¬
public interface RunSomething {
    void doIt();
    void doItAgain();                
}
```

![](/assets/images/java/functionalInterface-compile-error.png)

### í•¨ìˆ˜í˜•ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©

- java 8 ì´ì „

```java
public class App {
    public static void main(String[] args) {
         // java 8 ì´ì „ ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ (anonymous inner class)
        RunSomething runSomething = new RunSomething() {
            @Override
            public void doIt() {
                System.out.println("Hello, Java");
            }
        };
        runSomething.doIt();
    }
}
```

- java 8 ì´í›„

```java
public class App {
    public static void main(String[] args) {
        RunSomething runSomething = () -> System.out.println("Hello, Java");
        runSomething.doIt();
    }
}
```

ìœ„ ì‹ì€ ëŒë‹¤ í˜•íƒœë¡œ ì‘ì„±í•œ ê²ƒìœ¼ë¡œ java 8ì´ì „ì˜ ì‹ê³¼ ë™ì‘ì€ ë™ì¼í•˜ë‹¤. ëŒë‹¤ì‹ì€ ì‹¤ì§ˆì ìœ¼ë¡œ ìë°”ì—ì„œëŠ” **í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¸ë¼ì¸ìœ¼ë¡œ êµ¬í˜„í•œ object**ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.
ë˜í•œ, ìë°”ëŠ” ê°ì²´ì§€í–¥ ì–¸ì–´ì´ê¸°ë•Œë¬¸ì— ìœ„ ëŒë‹¤ì‹ (`() -> System.out.println("Hello, Java")`) ì€ 

- ë³€ìˆ˜ì— í• ë‹¹ë„ ê°€ëŠ¥í•˜ê³ 
    - `RunSomething runSomething = () -> System.out.println("Hello, Java");`
- ë©”ì„œë“œì˜ íŒŒë¼ë¯¸í„°
- ëŒë‹¤ì‹ ìì²´ë¥¼ ë¦¬í„´ë„ ê°€ëŠ¥í•˜ë‹¤.
- ìë°”ì—ì„œ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°
    - í•¨ìˆ˜ë¥¼ First class object ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    - ìˆœìˆ˜ í•¨ìˆ˜ (Pure function)
        - ì‚¬ì´ë“œ ì´í™íŠ¸ ë§Œë“¤ ìˆ˜ ì—†ë‹¤. (í•¨ìˆ˜ ë°–ì— ìˆëŠ” ê°’ì„ ë³€ê²½í•˜ì§€ ëª»í•œë‹¤.)
            
            ![](/assets/images/java/side-effect.png)
            
        - ìƒíƒœê°€ ì—†ë‹¤ (í•¨ìˆ˜ ë°–ì— ì •ì˜ë˜ì–´ ìˆëŠ”)
        
            ```java
            @FunctionalInterface
            public interface RunSomething {
                int doIt(int number);
            }
            
            public static void main(String[] args) {
                RunSomething runSomething = (number -> {
                    return number + 10;
                });
        
                System.out.println(runSomething.doIt(1));
                System.out.println(runSomething.doIt(1));
                System.out.println(runSomething.doIt(1));
            }
            ```
        
            ![](/assets/images/java/lamda-result1.png)
            
            ìœ„ ì½”ë“œëŠ” ë™ì¼í•œ ê°’ì„ ë„£ì—ˆì„ ë•Œ ê²°ê³¼ê°€ í•­ìƒ ë™ì¼í•œ ì½”ë“œì´ë‹¤. (ìƒíƒœê°€ ì—†ë‹¤)
        
            í•˜ì§€ë§Œ,
            
            ```java
            public static void main(String[] args) {
                int baseNumber = 10;
                
                RunSomething runSomething = (new RunSomething() {
                    @Override
                    public int doIt(int number) {
                        return number + baseNumber;
                    }
                });
            }
            ```
        
            ìœ„ ì½”ë“œëŠ” pure í•œ í•¨ìˆ˜ê°€ ì•„ë‹ˆë‹¤. ì´ëŸ¬í•œ ê²½ìš°ë¥¼ ìƒíƒœê°’ì„ ê°€ì§€ê³  ìˆë‹¤. ìƒíƒœê°’ì— ì˜ì¡´í•œë‹¤ ë¼ê³  í•  ìˆ˜ ìˆë‹¤. 
            
            **ì…ë ¥ ë°›ì€ ê°’ì´ ë™ì¼í•œ ê²½ìš° ê²°ê³¼ê°€** **í•­ìƒ ê°™ì•„ì•¼ í•œë‹¤. ì´ê²ƒì„ ë³´ì¥í•´ì£¼ì§€ ëª»í•œë‹¤ë©´ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì´ë¼ê³  ë³´ê¸° ì–´ë µë‹¤.**
        
    
    - ê³ ì°¨ í•¨ìˆ˜ (High-Order Function)
        - í•¨ìˆ˜ê°€ í•¨ìˆ˜ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì„ ìˆ˜ ìˆê³  í•¨ìˆ˜ë¥¼ ë¦¬í„´í•  ìˆ˜ë„ ìˆë‹¤.
    - ë¶ˆë³€ì„±

### ìë°”ì—ì„œ ê¸°ë³¸ ì œê³µí•˜ëŠ” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ (java.util.function)

- `Function<T,R>` (T: ì…ë ¥ê°’ íƒ€ì…, R : ë¦¬í„´ê°’ íƒ€ì…)
    
    Tíƒ€ì…ì„ ë°›ì•„ì„œ Ríƒ€ì…ì„ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ ì¸í„°í˜ì´ìŠ¤ë¡œ 
    
    - `R apply(T t)` ë¥¼ êµ¬í˜„í•˜ë©´ ëœë‹¤.
    
    ```java
    public class Plus50 implements Function<Integer, Integer> {
        @Override
        public Integer apply(Integer integer) {
            return integer + 50;
        }
    }
    ```
    
    ```java
    public class App {
    
    	public static void main(String[] args) {
            Plus50 plus50 = new Plus50();
            System.out.println("plus50.apply(10) = " + plus50.apply(10));
    	}
    }
    ```
    
    ![](/assets/images/java/lamda-result2.png)

    
    í´ë˜ìŠ¤ë¥¼ ì§€ìš°ê³  ëŒë‹¤ì‹ì„ ì´ìš©í•´ì„œ ë°”ë¡œ êµ¬í˜„ë„ ê°€ëŠ¥í•˜ë‹¤.
    
    ```java
    public class App {
    
        public static void main(String[] args) {
            Function<Integer, Integer> plus100 = (i -> {
                return i + 100;
            });

            System.out.println("plus100.apply(9) = " + plus100.apply(9));
        }
    }
    ```
    
    ![](/assets/images/java/lamda-result3.png)

    
    - í•¨ìˆ˜ ì¡°í•©ìš© ë©”ì†Œë“œ
        - `compose`
            - ()ì•ˆì˜ functionì„ ìˆ˜í–‰í•˜ê³  ë‚˜ì˜¨ ê²°ê³¼ê°’ì„ ë‘ë²ˆì§¸ functionì˜ ì…ë ¥ê°’ìœ¼ë¡œ ì¡°í•©í•´ì¤€ë‹¤.
            
            ```java
            public class App {
            
            	public static void main(String[] args) {
                    Function<Integer, Integer> plus100 = (i -> i + 100);
                    Function<Integer, Integer> multiply2 = i -> i * 2;
            
                    Function<Integer, Integer> multiply2AndPlus100 = plus100.compose(multiply2);
                    System.out.println("multiply2AndPlus100.apply(2) = " + multiply2AndPlus100.apply(2));
            
            	}
            }
            ```
            
            ![](/assets/images/java/lamda-result4.png)

            
        - `andThen`
            - ì²˜ìŒì— ì‘ì„±ëœ í•¨ìˆ˜ ë¨¼ì € ì‹¤í–‰ë˜ê³  ë‚˜ì˜¨ ê²°ê³¼ê°’ì„ í† ëŒ€ë¡œ ë‘ë²ˆì§¸ë¡œ ì‘ì„±ëœ functionì´ ì‹¤í–‰ëœë‹¤.
            
            ```java
            public class App {
            
                public static void main(String[] args) {
                    Function<Integer, Integer> plus100 = (i -> i + 100);
                    Function<Integer, Integer> multiply2 = i -> i * 2;
            
                    Function<Integer, Integer> plusAndMulti = plus100.andThen(multiply2);
                    System.out.println("plusAndMulti.apply(2) = " + plusAndMulti.apply(2));
                }
            }
            ```
            
            ![](/assets/images/java/lamda-result5.png)
            
- `BiFunction<T, U, R>` (T, U : ì…ë ¥ê°’ íƒ€ì…, R: ë¦¬í„´ê°’ íƒ€ì…)
    
    `Function<T,R>` ê³¼ ë™ì¼í•œë° ì…ë ¥ê°’ì„ ë‘ ê°œ ë°›ëŠ” í•¨ìˆ˜ ì¸í„°í˜ì´ìŠ¤
    
    - `R apply(T t, U u)`
    
    ```java
    public class App {
    
        public static void main(String[] args) {
            BiFunction<Integer, Integer, Integer> sum = (n1, n2) -> {
                return n1 + n2;
            };
            System.out.println("sum.apply(4, 1000) = " + sum.apply(4, 1000));   
        }
    }
    ```
    
    ![](/assets/images/java/lamda-result6.png)
    
- `Consumer<T>` (T :ì…ë ¥ê°’ íƒ€ì… , ë¦¬í„´ê°’ ì—†ìŒ)
    
    T íƒ€ì…ì„ ë°›ê³  ì•„ë¬´ê°’ë„ ë¦¬í„´í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ ì¸í„°í˜ì´ìŠ¤
    
    - `void Accept(T t)`
    
    ```java
    public class App {
    
        public static void main(String[] args) {
            Consumer<String> printStr = s -> System.out.println(s);
            printStr.accept("ì•ˆë…•");
        }
    }
    ```
    
    ![](/assets/images/java/lamda-result7.png)
    
    - í•¨ìˆ˜ ì¡°í•©ìš© ë©”ì„œë“œ
        - `andThen`
        
        ```java
        public class App {
        
            public static void main(String[] args) {
                Consumer<String> printStr = s -> System.out.println(s);
                Consumer<String> sleep = s -> {
                    System.out.println("ë‘ë²ˆì§¸ " + s);
                };
                printStr.andThen(sleep).accept("ë©”ë¡±");
            }
        }
        ```
        
        ![](/assets/images/java/lamda-result8.png)
        
- `Supplier<T>` (T : ë¦¬í„´ë  íƒ€ì…)
    
    T íƒ€ì…ì˜ ê°’ì„ ì œê³µí•˜ëŠ” í•¨ìˆ˜ ì¸í„°í˜ì´ìŠ¤
    
    - `T get()`
    
    ```java
    public class App {
    
        public static void main(String[] args) {
            Supplier<Integer> get20 = () -> 20;
            System.out.println("get20.get() = " + get20.get());
        }
    }
    ```
    
    ![](/assets/images/java/lamda-result9.png)
    
- `Predicate<T>` (T : ì…ë ¥ê°’ íƒ€ì…, boolean ë¦¬í„´)
    
    T íƒ€ì…ì„ ë°›ì•„ì„œ booleanì„ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ ì¸í„°í˜ì´ìŠ¤
    
    - `boolean test(T t)`
    
    ```java
    public class App {
    
        public static void main(String[] args) {
            Predicate<String> startsWithZero = (s -> s.startsWith("0"));
            Predicate<Integer> isOdd = (i -> i % 2 !=0);
            System.out.println("startsWithZero.test() = " + startsWithZero.test("010-7777-7777"));
            System.out.println("isOdd.test(3) = " + isOdd.test(3));
        }
    }
    ```
    
    ![](/assets/images/java/lamda-result10.png)
    
    - í•¨ìˆ˜ ì¡°í•©ìš© ë©”ì†Œë“œ
        - `and`
        
        ```java
        public class App {
        
            public static void main(String[] args) {
                Predicate<String> startsWithZero = (s -> s.startsWith("0"));
                Predicate<String> endWithZero = (s -> s.endsWith("0"));
        
                System.out.println(endWithZero.and(startsWithZero).test("010-3333-3331"));
            }
        }
        ```
        
        ![](/assets/images/java/lamda-result11.png)
        
        ì²« ë²ˆì§¸ í…ŒìŠ¤íŠ¸ëŠ” í†µê³¼í–ˆì§€ë§Œ ë‘ë²ˆì§¸ í…ŒìŠ¤íŠ¸ëŠ” í†µê³¼ ëª»í•´ì„œ `false` ë¦¬í„´ (ë‘˜ë‹¤ ì„±ê³µí•´ì•¼ `true`)
        
        - `or`
        
        ```java
        public class App {
        
            public static void main(String[] args) {
                Predicate<String> startsWithZero = (s -> s.startsWith("0"));
                Predicate<String> endWithZero = (s -> s.endsWith("0"));
                System.out.println(endWithZero.or(startsWithZero).test("010-3333-3331"));
        
            }
        ```
        
        ![](/assets/images/java/lamda-result12.png)
        
        ì²« ë²ˆì§¸ í…ŒìŠ¤íŠ¸ë§Œ í†µê³¼í•´ë„ `true` (ë‘˜ ì¤‘ í•˜ë‚˜ ì„±ê³µí•´ì•¼ `true` )
        
        - `negate`
        
        ```java
        public class App {
        
            public static void main(String[] args) {
                Predicate<Integer> isOdd = (i -> i % 2 !=0);
        
                System.out.println(isOdd.negate().test(3));
            }
        }
        ```
        
        ![](/assets/images/java/lamda-result13.png)
        
        3ì€ í™€ìˆ˜ê°€ ë§ì§€ë§Œ `negate` ì‚¬ìš©í•˜ë©´ `!` ì™€ ê°™ì€ íš¨ê³¼ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
        
- `UnaryOperator<T>` (T : ì…ë ¥ê°’ íƒ€ì…, ì…ë ¥ê°’ê³¼ ë™ì¼í•œ íƒ€ì… ë¦¬í„´)
    
    `Function<T, R>` ì˜ íŠ¹ìˆ˜í•œ í˜•íƒœë¡œ ì…ë ¥ê°’ íƒ€ì…ê³¼ ë¦¬í„´ê°’ íƒ€ì…ì´ ë™ì¼í•  ë•Œ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. 
    
    ```java
    public class App {
    
        public static void main(String[] args) {
            Function<Integer, Integer> plus100 = i -> i + 100;
            UnaryOperator<Integer> plus = i -> i + 100;
        }
    }
    ```
    
    - `Function<T, R>` ìƒì†
        
    ![](/assets/images/java/lamda-result14.png)
        
    `Function<T, R>` ì„ ìƒì†ë°›ê¸° ë•Œë¬¸ì— Functionì´ ì œê³µí•˜ëŠ” ì¡°í•©ìš© ë©”ì„œë“œë„ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.
        
- `BinaryOperator<T>`
    
    `BiFunction<T, U, R>` ì´ ì…ë ¥ê°’ ë‘ê°œ, ë¦¬í„´ê°’ ì„¸ê°œê°€ ê°ì ë‹¤ ë‹¤ë¥¸ íƒ€ì…ì¼ ê²ƒìœ¼ë¡œ ê°€ì •í•˜ê³  ë§Œë“¤ì–´ì§„ í•¨ìˆ˜ ì¸í„°í˜ì´ìŠ¤ë¼ë©´, `BinaryOperator<T>` ëŠ” ë™ì¼í•œ íƒ€ì…ì˜ ì…ë ¥ê°’ ë‘ê°œë¥¼ ë°›ì•„ ë¦¬í„´í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.
    
    ![](/assets/images/java/interface-binaryOperator.png)
    

## Variable Capture

ë³€ìˆ˜ ìº¡ì²˜ë€ ì˜ˆë¥¼ë“¤ì–´, 

```java
public class VariableCapture {

    public static void main(String[] args) {
        VariableCapture test = new VariableCapture();
        test.run();
    }

    private void run() {
        String testStr = "ë³€ìˆ˜ ìº¡ì²˜";

        class LocalClass {
            void printStr() {
                System.out.println(testStr);
            }
        }
    }
}
```

run ë©”ì†Œë“œì—ì„œ ê°–ê³ ìˆëŠ” ë³€ìˆ˜ `testStr` ì€ run ë©”ì†Œë“œ ì‹¤í–‰ì´ ì™„ë£Œë˜ë©´ ì‚¬ë¼ì§„ë‹¤. ê·¸ëŸ°ë° run ë©”ì†Œë“œ ì•ˆì˜ ë¡œì»¬í´ë˜ìŠ¤ì¸ `LocalClass` ì—ì„œ `testStr` ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ë‹ˆê¹Œ ìë°”ì—ì„œëŠ” ë³µì‚¬í•´ì˜¤ëŠ”ë° ì´ê²ƒì´ ë³€ìˆ˜ ìº¡ì²˜ì´ë‹¤. 

ì´ê²ƒì€ ë‚´ë¶€í´ë˜ìŠ¤ì— í•œí•œê²ƒì€ ì•„ë‹ˆê³  ì € ìƒí™©ì´ ì¼ì–´ë‚  ìˆ˜ ìˆëŠ” ìƒí™©ì€ ì—¬ëŸ¬ê°€ì§€ê°€ ìˆë‹¤. (ìµëª…í´ë˜ìŠ¤, ë‚´ë¶€í´ë˜ìŠ¤ ...)

- ìµëª…í´ë˜ìŠ¤ ë³€ìˆ˜ ìº¡ì³
    
    ```java
    public class VariableCapture2 {
    
        public static void main(String[] args) {
            VariableCapture2 test = new VariableCapture2();
            test.run();
        }

        private void run() {
            String testStr = "ë³€ìˆ˜ ìº¡ì²˜";

            Consumer<Integer> integerConsumer = new Consumer<Integer>() {
                @Override
                public void accept(Integer integer) {
                    System.out.println(testStr);
                }
            };
        }
    }
    ```
    
- ëŒë‹¤ ë³€ìˆ˜ ìº¡ì³
    
    ```java
    public class VariableCapture2 {
    
        public static void main(String[] args) {
            VariableCapture2 test = new VariableCapture2();
            test.run();
        }

        private void run() {
            String testStr = "ë³€ìˆ˜ ìº¡ì²˜";

            IntConsumer intConsumer = (i) -> System.out.println(testStr + i);
            intConsumer.accept(3);
        }
    }
    ```
    

ìë°” 8 ì´ì „ì—ëŠ” ë¡œì»¬ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ë•Œ `final` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì•¼ ë³€ìˆ˜ ìº¡ì²˜ë¥¼ í•  ìˆ˜ ìˆì—ˆë‹¤.

```java
private void run() {
    final String testStr = "ë³€ìˆ˜ ìº¡ì²˜"; // ìë°” 8 ì´ì „ ì—ëŠ” final í‚¤ì›Œë“œ í•„ìˆ˜

    class LocalClass {
        void printStr() {
            System.out.println(testStr);
        }
    }
}
```

`final` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ ê²½ìš° concurrency ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆì–´ì„œ ì»´íŒŒì¼ëŸ¬ê°€ ë°©ì§€í•œë‹¤.

- concurrency ë¬¸ì œ
    
    ë™ì¼í•œ ê°ì²´ì— ëŒ€í•´ ê³µìœ í•˜ê³  ì¶”í›„ ê·¸ ê°ì²´ê°€ ë³€ê²½ë˜ëŠ” ê²½ìš° ì˜ˆê¸°ì¹˜ ì•Šì€ ê²°ê³¼ë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆê³ , ê°ì²´ë¥¼ ë™ì‹œì— ë³€ê²½í•˜ë©´ ì†ìƒ ë˜ëŠ” ì¼ê´€ì„±ì´ ì—†ëŠ” ìƒíƒœê°€ ë  ìˆ˜ ìˆìŒ.
    

ê·¸ëŸ¬ë‚˜, ìë°” 8ë¶€í„°ëŠ” effective final ì„ ì§€ì›í•´ `final` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ ë³€ìˆ˜ë¥¼ ë¡œì»¬í´ë˜ìŠ¤, ìµëª… í´ë˜ìŠ¤ êµ¬í˜„ì²´ ë˜ëŠ” ëŒë‹¤ì—ì„œ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤. 

```java
private void run() {
    String testStr = "ë³€ìˆ˜ ìº¡ì²˜"; // ìë°” 8 ì´í›„ effective finalì¸ ê²½ìš° í‚¤ì›Œë“œ ìƒëµ ê°€ëŠ¥

    class LocalClass {
        void printStr() {
            System.out.println(testStr);
        }
    }
}
```

effective final ì‚¬ì‹¤ìƒ finalì´ë€ ë³€ìˆ˜ê°€ **ì¶”í›„ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ìƒí™©ì˜ ë³€ìˆ˜**ë¥¼ ì§€ì¹­í•œë‹¤.

ê·¸ëŸ¬ë©´ ë‚˜ì¤‘ì— ë³€ìˆ˜ê°€ ë³€ê²½ëœë‹¤ë©´ ? â†’ `effective final`ì´ ì•„ë‹ˆë¼ë©´?

```java
public class VariableCapture2 {

    public static void main(String[] args) {
        VariableCapture2 test = new VariableCapture2();
        test.run();
    }

    private void run() {
        int baseNumber = 10;

        class LocalClass {
            void printNumber() {
                System.out.println(baseNumber);    // ì»´íŒŒì¼ ì—ëŸ¬ ë°œìƒ
            }
        }

        Consumer<Integer> consumer = new Consumer<Integer>() {
            @Override
            public void accept(Integer integer) {
                System.out.println(baseNumber);     // ì»´íŒŒì¼ ì—ëŸ¬ ë°œìƒ
            }
        };

        IntConsumer printInt = (i) -> {
            System.out.println(i + baseNumber);   // ì»´íŒŒì¼ ì—ëŸ¬ ë°œìƒ
        };
        
        baseNumber++;
        
        LocalClass localClass = new LocalClass();
        localClass.printNumber();
        consumer.accept(1);
    }
}
```

Variable 'baseNumber' is accessed from within inner class, needs to be **final** or **effectively final ê°™ì€ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒëœë‹¤.**

### ëŒë‹¤ vs ìµëª…í´ë˜ìŠ¤ vs ë¡œì»¬í´ë˜ìŠ¤

- ê³µí†µì 
    - Variable Capture ì§€ì›
    - effective final ì§€ì›
- ì°¨ì´ì 
    - ì‰ë„ì‰
        - ìµëª…í´ë˜ìŠ¤, ë¡œì»¬í´ë˜ìŠ¤ ì‰ë„ì‰ ëœë‹¤.
            - ì™œ? ê°ê° ë‹¤ë¥¸ ìŠ¤ì½¥ì„ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì—
        - ëŒë‹¤ëŠ” ì‰ë„ì‰ ì•ˆëœë‹¤.
            - ì™œ? ëŒë‹¤ëŠ” í•´ë‹¹ ëŒë‹¤ì‹ì„ êµ¬í˜„í•œ ê³³(ex. ë©”ì†Œë“œ)ê³¼ ê°™ì€ ìŠ¤ì½¥ì„ ê°–ê³  ìˆê¸° ë•Œë¬¸ì—

### ì‰ë„ì‰

```java
public class VariableCapture2 {

    public static void main(String[] args) {
        VariableCapture2 test = new VariableCapture2();
        test.run();
    }

    private void run() {
        int baseNumber = 10;

        class LocalClass {
            void printNumber() {
                int baseNumber = 11;
                System.out.println(baseNumber);
            }
        }

        Consumer<Integer> consumer = new Consumer<Integer>() {
            int baseNumber = 13;
            @Override
            public void accept(Integer integer) {
                System.out.println(baseNumber);
            }
        };

        LocalClass localClass = new LocalClass();
        localClass.printNumber();
        consumer.accept(1);
    }
}
```

![](/assets/images/java/lamda-result15.png)

run ë©”ì†Œë“œì˜ ì§€ì—­ë³€ìˆ˜ì¸ `baseNumber` ì˜ ê°’ì€ 10ì´ì—ˆëŠ”ë° ë¡œì»¬í´ë˜ìŠ¤, ìµëª…í´ë˜ìŠ¤ì™€ run ë©”ì†Œë“œëŠ” ì„œë¡œ ë‹¤ë¥¸ scope ì— ìˆê¸° ë•Œë¬¸ì— ê°€ë ¤ì ¸ì„œ 11ê³¼ 13ì´ ì¶œë ¥ë˜ëŠ” ê²ƒì´ë‹¤. ì´ê²ƒì„ **ì‰ë„ì‰** ì´ë¼í•œë‹¤.

í•˜ì§€ë§Œ ëŒë‹¤ëŠ” run() ë©”ì†Œë“œì™€ ê°™ì€ scopeì— ìˆì–´ì„œ ì‰ë„ì‰ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.

![](/assets/images/java/shadow.png)

![](/assets/images/java/lamda-compile-error.png)

## ë©”ì†Œë“œ, ìƒì„±ì ë ˆí¼ëŸ°ìŠ¤

method referenceëŠ” ëŒë‹¤ í‘œí˜„ì‹ì´ ë‹¨ í•˜ë‚˜ì˜ ë©”ì†Œë“œë§Œì„ í˜¸ì¶œí•˜ëŠ” ê²½ìš°ì— í•´ë‹¹ ëŒë‹¤ í‘œí˜„ì‹ì—ì„œ ë¶ˆí•„ìš”í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì œê±°í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.

ë©”ì†Œë“œ ì°¸ì¡°ë¥¼ ì‚¬ìš©í•˜ë©´ ë¶ˆí•„ìš”í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì œê±°í•˜ê³  '`::`' ê¸°í˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.

>âœï¸ - ìŠ¤íƒœí‹± ë©”ì†Œë“œ ì°¸ì¡°
>   `í´ë˜ìŠ¤íƒ€ì…::ìŠ¤íƒœí‹±ë©”ì†Œë“œì´ë¦„`
> - íŠ¹ì • ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì†Œë“œ ì°¸ì¡°
>   `ì°¸ì¡°ë³€ìˆ˜íƒ€ì…::ì¸ìŠ¤í„´ìŠ¤ë©”ì†Œë“œì´ë¦„`
> - ì„ì˜ ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì†Œë“œ ì°¸ì¡°
>   `íƒ€ì…::ì¸ìŠ¤í„´ìŠ¤ë©”ì†Œë“œì´ë¦„`
> - ìƒì„±ì ì°¸ì¡°
>   `íƒ€ì…::new`

ë‹¤ìŒê³¼ ê°™ì€ í´ë˜ìŠ¤ê°€ ìˆì„ ë•Œ, 

```java
public class Greeting {

    private String name;

    public Greeting() {
    }

    public Greeting(String name) {
        this.name = name;
    }

    public String hello(String name) {
        return "hello " + name;
    }

    public static String hi(String name) {
        return "hi " + name;
    }
}
```

- ìŠ¤íƒœí‹± ë©”ì†Œë“œ ì°¸ì¡°
    
    ```java
    UnaryOperator<String> hi = Greething::hi;
    hi.apply("java");
    ```
    
- íŠ¹ì • ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì†Œë“œ ì°¸ì¡°
    
    ```java
    Greeting greeting = new Greeting();
    UnaryOperator<String> hello = greeting::hello;
    hello.apply("java");
    ```
    
- ì„ì˜ ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì†Œë“œ ì°¸ì¡°
    
    ```java
    String[] names = {"younghee", "dongsu", "gildong"};
    Arrays.sort(names, (o1, o2) -> 0);
    ```
    
    ìœ„ì™€ ê°™ì€ ì½”ë“œê°€ ê°€ëŠ¥í•œ ê²ƒì€ `sort` ì˜ ë‘ë²ˆì§¸ ì¸ìê°€ Comparatorë¡œ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì´ê¸°ë•Œë¬¸ì— ê·¸ ìë¦¬ì— ëŒë‹¤ë¥¼ ë„£ì„ ìˆ˜ ìˆëŠ”ê²ƒì´ë‹¤.  
    
    ![](/assets/images/java/interface-comparator.png)
    
    ëŒë‹¤ë¥¼ ë„£ì„ ìˆ˜ ìˆë‹¤ëŠ” ë§ì€ ë©”ì†Œë“¤ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ë§ë¡œ, ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œê°€ ê°€ëŠ¥í•˜ë‹¤.
    
    ```java
    public class App {
        public static void main(String[] args) {
            String[] names = {"younghee", "dongsu", "gildong"};
            Arrays.sort(names, String::compareToIgnoreCase);
            System.out.println(Arrays.toString(names));
        }
    }
    ```
    
    ![](/assets/images/java/lamda-result16.png)
    
    1. `younghee` ë’¤ì— ì˜¤ëŠ” `dongsu`ë¥¼ `compareToIgnoreCase` ì˜ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ì„œ intê°’ì„ ë¦¬í„´
    2. `dongsu`ì™€ `gildong`ê³¼ ë¹„êµí•˜ì—¬ intê°’ ë¦¬í„´
    
    â†’ ì„ì˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë“¤ (`younghee`,`dongsu`, `gildong`) ë¥¼ ê±°ì³ê°€ë©° ì¸ìŠ¤í„´ìŠ¤ ë©”ì†Œë“œ ì‚¬ìš©(`compareToIgnoreCase`)
    
- ìƒì„±ì ë ˆí¼ëŸ°ìŠ¤
    - default ìƒì„±ì (ì…ë ¥ê°’ x)
    
    ```java
    Function<String, Greeting> newGreeting = Greeting::new;
    Greeting greetingInstance = newGreeting.get();
    ```
    
    - ë§¤ê°œë³€ìˆ˜ ë°›ëŠ” ìƒì„±ì (ì…ë ¥ê°’ o)
    
    ```java
    Funtion<String, Greeting> dongsuGreeting = Greeting::new;
    Greeting dongsu = dongsuGreeting.apply("dongsu");
    System.out.println(dongsu.getName());
    ```
    

---

## Reference

[https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html](https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html)

[https://www.inflearn.com/course/the-java-java8/](https://www.inflearn.com/course/the-java-java8/)